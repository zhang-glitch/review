<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>

<body>
  <p class="refreshText"></p>
  <ul id="refreshContainer">
    <li>111</li>
    <li>222</li>
    <li>333</li>
    <li>444</li>
    <li>555</li>
    <li>555</li>
    <li>555</li>
    <li>555</li>
    <li>555</li>
    <li>555</li>
    <li>555</li>
    <li>555</li>
    <li>555</li>
    <li>555</li>
    <li>555</li>
    <li>555</li>
    <li>555</li>
    <li>555</li>
    <li>555</li>
    <li>555</li>
    <li>555</li>
    <li>555</li>
    <li>555</li>
    <li>555</li>
    <li>555</li>
    <li>555</li>
    <li>555</li>
    <li>555</li>
    <li>555</li>
    <li>555</li>
    <li>555</li>
    <li>555</li>
    <li>555</li>
    <li>555</li>
    <li>555</li>
    <li>555</li>
    <li>555</li>
    <li>555</li>
    <li>555</li>
    <li>555</li>
    <li>555</li>
    <li>555</li>
    <li>555</li>
    <li>555</li>
    <li>555</li>
    <li>555</li>
    <li>555</li>
    <li>555</li>
    <li>555</li>
    <li>555</li>
    <li>555</li>
    <li>555</li>
    <li>555</li>
    <li>555</li>
    <li>555</li>
    <li>555</li>
    <li>555</li>
    <li>555</li>
    <li>555</li>
    <li>555</li>
    <li>555</li>
    <li>555</li>
    <li>555</li>
    <li>555</li>
    <li>555</li>
    <li>555</li>
    <li>555</li>
    <li>555</li>
    <li>555</li>
    <li>555</li>
    <li>555</li>
    <li>555</li>
    <li>555</li>
    <li>555</li>
    <li>555</li>
    <li>555</li>
    <li>555</li>
    <li>555</li>
    <li>555</li>
    <li>555</li>
    <li>555</li>
    <li>555</li>
    <li>555</li>
    <li>555</li>
    <li>555</li>
    <li>555</li>
    <li>555</li>
    <li>555</li>
    <li>555</li>
    <li>555</li>
    <li>555</li>
    <li>555</li>
    <li>555</li>
    <li>555</li>
    <li>555</li>
  </ul>
  <script>
    var _element = document.getElementById('refreshContainer'),
      _refreshText = document.querySelector('.refreshText'),
      _startPos = 0,  // 初始的值
      _transitionHeight = 0; // 移动的距离

    _element.addEventListener('touchstart', function (e) {
      _startPos = e.touches[0].clientY; // 记录初始位置
      // _element.style.position = 'relative';
      // 这个就是当再次刷新的时候，我们需要设置下拉时不需要有过度，要不然回到顶部的时候就会将过度事件添加。
      _element.style.transition = 'transform 0s';
    }, false);


    _element.addEventListener('touchmove', function (e) {
      // e.touches[0].pageY 当前位置
      _transitionHeight = e.touches[0].clientY - _startPos; // 记录差值
      console.log('_transitionHeight', _transitionHeight)

      if (_transitionHeight > 0 && _transitionHeight < 60) {
        _refreshText.innerText = '下拉刷新';
        _element.style.transform = 'translateY(' + _transitionHeight + 'px)';

        if (_transitionHeight > 55) {
          _refreshText.innerText = '释放更新';
        }
      }
    }, false);

    // 手指释放
    _element.addEventListener('touchend', function (e) {
      _element.style.transition = 'transform 0.5s ease 1s';
      _element.style.transform = 'translateY(0px)';
      _refreshText.innerText = '更新中...';
      // todo...

    }, false);
  </script>
</body>

</html>